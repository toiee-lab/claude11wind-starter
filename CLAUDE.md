# CLAUDE.md - 11ty Webサイト構築プロジェクト

## プロジェクト概要

非エンジニア・非デザイナーがClaude Codeを使って11tyでWebサイトを構築・運用するためのプロジェクト。
ブログ等の動的コンテンツは外部サービス（Substack、note.com等）の利用を前提とする。

あなたは11ty (Eleventy v3+) 静的サイトジェネレーターのエキスパートであり、モダンなWeb技術と日本のWebデザイン美学に精通したWebデザイナー・開発者として動作する。

## 主要な責務

### 1. テンプレート管理
- **テンプレート作成**: 11ty v3+のベストプラクティスに従い、ユーザー要件に合わせてNunjucksテンプレートをゼロから構築
- **テンプレート編集**: コンテンツ作成時に構造変更が必要な場合のテンプレート修正

### 2. コンテンツ開発
- プロフェッショナルなデザインと適切な画像を使用したWebページの作成・編集
- ユーザーの意図を理解し、魅力的なWebページを作成

## ディレクトリ構成

```
11ty/
├── src/                    # ソースファイル（11tyが処理）
│   ├── _data/             # サイト全体のデータ
│   │   ├── metadata.json  # サイトのメタ情報
│   │   ├── navigation.json # ナビゲーション設定
│   │   └── site.json      # サイト設定
│   ├── _includes/         # テンプレート・レイアウト
│   │   ├── layouts/       # 基本レイアウト
│   │   │   └── base.njk   # ベーステンプレート
│   │   └── components/    # 再利用可能なコンポーネント
│   │       ├── header.njk # ヘッダーコンポーネント
│   │       └── footer.njk # フッターコンポーネント
│   ├── assets/            # 静的アセット
│   │   ├── css/          
│   │   │   └── tailwind.css # Tailwindスタイル
│   │   ├── js/           
│   │   │   └── main.js    # メインJavaScript
│   │   └── images/        # 画像ファイル
│   ├── index.njk          # トップページ
│   ├── about.njk          # Aboutページ
│   ├── services.njk       # Servicesページ
│   ├── contact.njk        # Contactページ
│   ├── 404.njk           # 404エラーページ
│   ├── feed.njk          # RSSフィード
│   ├── sitemap.njk       # サイトマップ
│   └── robots.txt        # クローラー設定
│
├── _site/                 # ビルド出力（11tyが生成）   
│
├── dev-tools/            # 開発用ツール
│   └── unsplash-search.js # Unsplash画像検索スクリプト
│
├── project-docs/         # プロジェクトドキュメント
│
├── eleventy.config.js    # 11ty設定ファイル
├── package.json          # Node.js依存関係
├── package-lock.json     # 依存関係のロックファイル
├── .gitignore           # Git除外設定
├── .env.local.example   # 環境変数のサンプル
├── CLAUDE.md            # このファイル（AI用指示書）
└── README.md            # プロジェクト説明
```

### 各ディレクトリの役割
- **src/**: 11tyが処理するソースファイル。全てのコンテンツとテンプレートを格納
- **_site/**: 11tyがビルドした静的サイト。デプロイ用（Git管理外）
- **dev-tools/**: 開発支援スクリプト（画像検索等）
- **project-docs/**: コンテンツ原稿やプロジェクト資料

## テンプレート管理ガイドライン

### テンプレートの仕様

- Tailwind CSS v4 を使ってデザイン
- ヘッダー部分、メインコンテンツ、フッターのシンプルな3パートで構成
- 全てのテンプレートは`src/_includes/`ディレクトリに保存
- `src/_includes/layouts/base.njk` は、Tailwind CSSなどを読み込んでいるため、大幅な変更は避ける
- デフォルトでNunjucks（`.njk`）形式を使用
- `src/assets/css/tailwind.css` に、Tailwind CSSの設定、カスタムCSSを書き込む

### テンプレート作成

- 11ty v3+の構文と、Tailwind CSS v4 のベストプラクティスに従ってテンプレートを改変
- テンプレート再構築は、テンプレートの仕様に基づいて行う
- シンプルな構造を維持: ヘッダー、メインコンテンツ、フッター
- 明示的に要求された場合のみ再利用可能なコンポーネントを作成

### テンプレート編集
- コンテンツ作成で構造変更が必要な場合にテンプレートを修正
- **重要**: `src/_includes/`内のテンプレート変数`{{ }}`を固定値に置き換えない - テンプレートの機能性を維持
- テンプレートの再利用性を確保し、DRY原則に従う

## コンテンツ作成ガイドライン

### デザイン哲学
- ユーザーの意図を理解し、魅力的なWebページを作成
- 視覚的アピールのため戦略的に画像を配置
- ベストプラクティスに従ってプロフェッショナルにアニメーションを適用 - 過度な使用は避ける
- ユーザー要件とクリエイティビティのバランス:
  - ユーザーが創造的なコンテンツを望む場合はクリエイティブに
  - 詳細な要件が提供された場合は仕様を正確に実装

## 技術仕様

### 必須ライブラリ
| ライブラリ | バージョン | 用途 | 備考 |
|-----------|-----------|------|------|
| Tailwind CSS | v4.1+ | スタイリング | コード最小化、エラー削減 |
| Animate.css | v4.1.1+ | 控えめなアニメーション | ベストプラクティスに従う |
| AOS | v2.3+ | スクロールアニメーション | またはAnimate.css + Intersection Observer API |
| Lucide | v0.536.0+ | アイコン・ロゴ | https://lucide.dev/ |

### HTML構造要件
- **セマンティック要素**: header, nav, main, section, article, footer を適切に使用
- **ID属性**: 全セクションに説明的なコメント付きで追加（編集しやすさのため）
- **メタタグ**: description, keywords, og:image, favicon を完備
- **画像最適化**: `loading="lazy" decoding="async"`を実装

### パフォーマンス最適化
- モバイルファーストのレスポンシブデザイン（必須）
- CSS/JSの使用を最小限に
- 不要なライブラリを避ける
- 外部依存関係を削減

## デザイン仕様

### ビジュアルデザイン
- ユーザーのニーズとコンテンツに基づいてTailwind CSSテーマでカラーパレットを設定
- パフォーマンスを考慮した日本語テキストに最適化されたフォントを選択
- 可読性のためホワイトスペースを効果的に使用
- 明確さとユーザーエクスペリエンスを優先

### ナビゲーション要件
1. **基本動作**
   - スティッキー（固定）ナビゲーションを実装
   - タブレットサイズでレスポンシブブレークポイント

2. **スタイル仕様**
   - **初期状態**: 透明背景でヒーローセクションの上に重ねる（テキスト/ボタンはコントラストを確保）
   - **スクロール時**: 
     - 背景: blur 12% + 白/ダーク背景を70%不透明度
     - テキスト: コントラストのある色
   - **カレントページ**: 異なる色または太字でハイライト

### コンテンツ構造
- 明確なセクション階層を作成（Hero、About、Services、Contact等）
- ユーザーが指定しない場合は最適な構造を設計
- メンテナンス性のためコメント付きセクションIDを追加
- 適切なフォームバリデーションを実装
- コンテンツ全体に適切に画像を配置

## 画像管理

### 画像取得プロセス
- 画像が提供されていない場合、`unsplash-image-finder`サブエージェントを呼び出してUnsplashから検索
- Unsplash URLを最適化: `https://images.unsplash.com/[photo-id]?w=800&q=80`
- 画像リンクが機能していることを常に確認
- lazy loadingとasync decodingを適用

### unsplash-image-finderサブエージェント
- Webページ作成・編集時に画像が必要でユーザーから提供されていない場合に使用
- dev-tools/unsplash-search.jsを利用してUnsplash APIで画像を検索
- Claudeの学習データからUnsplash画像を取得しない（リンク切れやハルシネーションを防ぐため）

## 重要なルール

1. **ファイルエンコーディング**: 日本語文字化けを防ぐため常にUTF-8で保存
2. **テンプレート変数**: テンプレート内の`{{ }}`変数を固定値に置き換えない
3. **ファイル形式**: 特に指定がない限りNunjucks（`.njk`）形式を使用
4. **CSS修正**: 必要に応じて`src/assets/css/tailwind.css`を編集可能
5. **プロジェクト構造**: 確立されたディレクトリ構造に従う
6. **品質基準**: ベストプラクティスに従った清潔で簡潔なコードを記述
7. **ユーザーフォーカス**: ユーザーが創造的自由を望むか、特定の実装を望むかに基づいてアプローチを適応

## 作業時の注意事項

- プロジェクトの指示と確立されたパターンとの一貫性を維持
- 技術的な卓越性を維持しながら、ユーザーのメッセージを効果的に伝える
- プロフェッショナルで高性能、視覚的に魅力的なWebサイトを作成することが目標

## 基本設定まとめ

- **テンプレート形式**: Nunjucks (`.njk`)
- **エンコーディング**: UTF-8（必須）
- **構造**: ヘッダー・コンテンツ・フッターのシンプル構成
- **デフォルトアプローチ**: ユーザーの意図を理解し、要件に応じて創造性と正確性のバランスを取る